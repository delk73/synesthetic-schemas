{
  "$defs": {
    "ModulationItem": {
      "properties": {
        "amplitude": {
          "description": "Amplitude of the modulation",
          "title": "Amplitude",
          "type": "number"
        },
        "frequency": {
          "description": "Frequency of the modulation in Hz",
          "title": "Frequency",
          "type": "number"
        },
        "id": {
          "description": "Unique identifier for the modulation",
          "title": "Id",
          "type": "string"
        },
        "max": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Maximum allowable value for the modulation",
          "title": "Max"
        },
        "min": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Minimum allowable value for the modulation",
          "title": "Min"
        },
        "offset": {
          "description": "Offset/base value of the modulation",
          "title": "Offset",
          "type": "number"
        },
        "phase": {
          "description": "Phase offset in radians",
          "title": "Phase",
          "type": "number"
        },
        "scale": {
          "default": 1.0,
          "description": "Scaling factor applied to the modulation output",
          "title": "Scale",
          "type": "number"
        },
        "scaleProfile": {
          "description": "Response profile to shape the modulation output",
          "enum": [
            "linear",
            "exponential",
            "logarithmic",
            "sine",
            "cosine"
          ],
          "title": "Scaleprofile",
          "type": "string"
        },
        "target": {
          "description": "Target parameter path (e.g., 'visual.u_wave_speed', 'tone.filter.frequency')",
          "title": "Target",
          "type": "string"
        },
        "type": {
          "description": "Type of modulation",
          "enum": [
            "additive",
            "multiplicative"
          ],
          "title": "Type",
          "type": "string"
        },
        "waveform": {
          "description": "Waveform type",
          "enum": [
            "sine",
            "triangle",
            "square",
            "sawtooth"
          ],
          "title": "Waveform",
          "type": "string"
        }
      },
      "required": [
        "id",
        "target",
        "type",
        "waveform",
        "frequency",
        "amplitude",
        "offset",
        "phase"
      ],
      "title": "ModulationItem",
      "type": "object"
    }
  },
  "$id": "https://schemas.synesthetic.dev/0.1.0/modulation.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "properties": {
    "description": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Description of the modulation set",
      "title": "Description"
    },
    "meta_info": {
      "anyOf": [
        {
          "type": "object"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Metadata about the modulation set",
      "examples": [
        {
          "category": "modulation",
          "complexity": "medium",
          "tags": [
            "multimodal",
            "dynamic"
          ]
        }
      ],
      "title": "Meta Info"
    },
    "modulation_id": {
      "title": "Modulation Id",
      "type": "integer"
    },
    "modulations": {
      "description": "List of modulations",
      "examples": [
        {
          "amplitude": 0.5,
          "frequency": 0.5,
          "id": "wave_speed_pulse",
          "max": 1.0,
          "min": 0.0,
          "offset": 1.0,
          "phase": 0.0,
          "scale": 1.0,
          "scaleProfile": "linear",
          "target": "visual.u_wave_speed",
          "type": "additive",
          "waveform": "triangle"
        },
        {
          "amplitude": 400,
          "frequency": 0.25,
          "id": "filter_sweep",
          "max": 1.0,
          "min": 0.0,
          "offset": 800,
          "phase": 0.0,
          "scale": 1.0,
          "scaleProfile": "exponential",
          "target": "tone.filter.frequency",
          "type": "additive",
          "waveform": "triangle"
        },
        {
          "amplitude": 0.2,
          "frequency": 1.0,
          "id": "haptic_pulse",
          "max": 1.0,
          "min": 0.0,
          "offset": 0.6,
          "phase": 0.0,
          "scale": 1.0,
          "scaleProfile": "linear",
          "target": "haptic.intensity",
          "type": "additive",
          "waveform": "sine"
        }
      ],
      "items": {
        "$ref": "#/$defs/ModulationItem"
      },
      "title": "Modulations",
      "type": "array"
    },
    "name": {
      "description": "Name of the modulation set",
      "title": "Name",
      "type": "string"
    }
  },
  "required": [
    "name",
    "modulations",
    "modulation_id"
  ],
  "title": "Modulation",
  "type": "object",
  "x-schema-version": "0.1.0"
}
